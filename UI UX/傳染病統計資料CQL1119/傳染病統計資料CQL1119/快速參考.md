# 🚀 快速參考卡

## 一分鐘快速開始

```powershell
# 1. 安裝套件
npm install

# 2. 使用範例資料測試（推薦）
npm run test:sample

# 3. 連接真實 SMART 伺服器
npm test
```

---

## 常用命令

| 命令 | 說明 |
|------|------|
| `npm test` | 連接 SMART 伺服器測試所有 CQL |
| `npm run test:sample` | 使用範例資料測試 |
| `node testRunner.js --sample` | 等同於上方命令 |

---

## 檔案位置速查

### 核心程式
- `testRunner.js` - 主程式
- `smartFhirConnector.js` - FHIR 連線
- `dataFilterDisplay.js` - 資料處理
- `sampleDataGenerator.js` - 範例資料

### 設定與文件
- `config.json` - **系統設定（可修改）**
- `README.md` - 基本說明
- `使用指南.md` - 詳細指南
- `專案完成總結.md` - 需求檢查
- `系統架構圖.md` - 視覺化圖表

### 輸出結果
- `results/*.json` - JSON 格式結果
- `results/*.csv` - CSV 格式結果

---

## 設定檔快速修改

### 📅 修改時間範圍（預設 2 年）
編輯 `config.json`:
```json
"timeRangeYears": 3
```

### 🔗 新增 FHIR 伺服器
編輯 `config.json`:
```json
{
  "name": "My Server",
  "fhirBaseUrl": "https://your-server.com/fhir",
  "enabled": true
}
```

### 📊 調整顯示欄位
編輯 `config.json`:
```json
"displayFields": [
  "totalCount",
  "ageDistribution",
  "genderDistribution"
]
```

---

## 輸出結果速查

### 控制台輸出包含
- ✅ 總人數
- ✅ 年齡分佈（5組）
- ✅ 性別分佈
- ✅ 就醫類型（門診/急診/住院）
- ✅ 病毒類型
- ✅ 居住地（僅城市/州）
- ✅ 資料來源

### 檔案輸出
- `results/疾病名稱_時間戳記.json` - 完整資料
- `results/疾病名稱_時間戳記.csv` - 表格格式

---

## 5 個 CQL 函式庫

| 序號 | 名稱 | 檔案 | 說明 |
|------|------|------|------|
| 1 | COVID-19 | `COVID19.cql` | 新冠病毒監測 |
| 2 | 流感 | `流感.cql` | 流感監測 |
| 3 | 紅眼症 | `紅眼症.cql` | 急性結膜炎監測 |
| 4 | 腸病毒 | `腸病毒.cql` | 腸病毒監測 |
| 5 | 腹瀉 | `腹瀉.cql` | 急性腹瀉監測 |

---

## 資料來源（SMART FHIR 伺服器）

| 序號 | 名稱 | URL | 狀態 |
|------|------|-----|------|
| 1 | SMART Server 1 | https://r4.smarthealthit.org | ✅ 已設定 |
| 2 | SMART Server 2 | https://launch.smarthealthit.org/v/r4/fhir | ✅ 已設定 |

---

## 隱私保護檢查清單

- ❌ 不顯示患者 ID
- ❌ 不顯示姓名
- ❌ 不顯示身分證號
- ❌ 不顯示詳細地址
- ❌ 不顯示郵遞區號
- ✅ 僅顯示城市/州
- ✅ 僅顯示統計彙總

---

## 需求完成檢查

| 需求 | 狀態 |
|------|------|
| 1. 測試 5 個 CQL | ✅ |
| 2. 連接 2 個 SMART 伺服器 | ✅ |
| 3. CQL 大範圍 + JS 管控 | ✅ |
| 3-1. 2年內資料 | ✅ |
| 3-2. 總人數 | ✅ |
| 3-3. 年齡 | ✅ |
| 3-4. 性別 | ✅ |
| 3-5. 門診/急診/住院 | ✅ |
| 3-6. 病毒類型 | ✅ |
| 3-7. 居住地 | ✅ |
| 3-8. 不用個資 | ✅ |

---

## 疑難排解

### 問題：npm 找不到
**解決**：確認已安裝 Node.js

### 問題：無資料回傳
**解決**：使用 `npm run test:sample` 測試系統

### 問題：連線失敗
**解決**：檢查網路連線與防火牆

---

## 範例輸出

```
👥 總人數: 100

📊 年齡分佈:
  18-44歲: 47 (47.0%)
  45-64歲: 12 (12.0%)

👤 性別分佈:
  男性: 33 (33.0%)
  女性: 67 (67.0%)

🏥 就醫類型分佈:
  門診: 33 (33.0%)
  急診: 34 (34.0%)
  住院: 33 (33.0%)
```

---

## 重要連結

### 文件
- 📖 `README.md` - 開始這裡
- 📚 `使用指南.md` - 詳細說明
- ✅ `專案完成總結.md` - 需求檢查
- 🎨 `系統架構圖.md` - 視覺化

### 外部資源
- [SMART on FHIR](https://smarthealthit.org/)
- [FHIR R4](https://www.hl7.org/fhir/)
- [CQL](https://cql.hl7.org/)

---

**版本**: 1.0.0  
**最後更新**: 2025-11-15  
**狀態**: ✅ 可用
