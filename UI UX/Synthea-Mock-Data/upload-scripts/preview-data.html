<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FHIR è³‡æ–™é è¦½</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Microsoft JhengHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .header h1 {
            color: #667eea;
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 16px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .stat-card h3 {
            color: #667eea;
            font-size: 16px;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .stat-card .value {
            font-size: 36px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .stat-card .label {
            color: #888;
            font-size: 14px;
        }
        
        .details {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .details h2 {
            color: #667eea;
            font-size: 24px;
            margin-bottom: 20px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        
        .resource-list {
            display: grid;
            gap: 10px;
        }
        
        .resource-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .resource-item .name {
            font-weight: 600;
            color: #333;
        }
        
        .resource-item .count {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: white;
            font-size: 20px;
        }
        
        .error {
            background: #ff4444;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .indicator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .indicator-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .indicator-card h4 {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .indicator-card .value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .indicator-card .range {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š FHIR è³‡æ–™é è¦½</h1>
            <p>Synthea åˆæˆç—…äººè³‡æ–™çµ±è¨ˆ</p>
        </div>
        
        <div id="loading" class="loading">
            <div>â³ æ­£åœ¨è¼‰å…¥è³‡æ–™...</div>
        </div>
        
        <div id="error" style="display: none;"></div>
        
        <div id="content" style="display: none;">
            <!-- ä¸»è¦çµ±è¨ˆ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>ğŸ“ æª”æ¡ˆç¸½æ•¸</h3>
                    <div class="value" id="fileCount">-</div>
                    <div class="label">FHIR Bundle æª”æ¡ˆ</div>
                </div>
                
                <div class="stat-card">
                    <h3>ğŸ‘¥ ç—…äººæ•¸é‡</h3>
                    <div class="value" id="patientCount">-</div>
                    <div class="label">Patient è³‡æº</div>
                </div>
                
                <div class="stat-card">
                    <h3>ğŸ“‹ è³‡æºç¸½æ•¸</h3>
                    <div class="value" id="resourceCount">-</div>
                    <div class="label">æ‰€æœ‰ FHIR è³‡æº</div>
                </div>
                
                <div class="stat-card">
                    <h3>ğŸ’¾ ç¸½æª”æ¡ˆå¤§å°</h3>
                    <div class="value" id="totalSize">-</div>
                    <div class="label">MB</div>
                </div>
            </div>
            
            <!-- è³‡æºé¡å‹è©³æƒ… -->
            <div class="details">
                <h2>ğŸ“š è³‡æºé¡å‹çµ±è¨ˆ</h2>
                <div class="resource-list" id="resourceTypes"></div>
            </div>
            
            <!-- é æœŸæŒ‡æ¨™å€¼ -->
            <div class="details" style="margin-top: 20px;">
                <h2>ğŸ¯ é†«ç™‚å“è³ªæŒ‡æ¨™é æœŸå€¼</h2>
                <div class="indicator-grid">
                    <div class="indicator-card">
                        <h4>æŒ‡æ¨™ 01: é–€è¨ºæ³¨å°„åŠ‘ä½¿ç”¨ç‡</h4>
                        <div class="value">5.0%</div>
                        <div class="range">ç¯„åœ: 3.5% - 7.5%</div>
                    </div>
                    
                    <div class="indicator-card">
                        <h4>æŒ‡æ¨™ 02: é–€è¨ºæŠ—ç”Ÿç´ ä½¿ç”¨ç‡</h4>
                        <div class="value">18.0%</div>
                        <div class="range">ç¯„åœ: 15.0% - 22.0%</div>
                    </div>
                    
                    <div class="indicator-card">
                        <h4>æŒ‡æ¨™ 10: ç³–å°¿ç—…æ§åˆ¶ä¸è‰¯ç‡</h4>
                        <div class="value">20.0%</div>
                        <div class="range">ç¯„åœ: 16.0% - 25.0%</div>
                    </div>
                    
                    <div class="indicator-card">
                        <h4>æŒ‡æ¨™ 03-1: åŒé†«é™¢é‡è¤‡ç”¨è—¥ç‡</h4>
                        <div class="value">6.5%</div>
                        <div class="range">ç¯„åœ: 4.0% - 9.0%</div>
                    </div>
                    
                    <div class="indicator-card">
                        <h4>æŒ‡æ¨™ 03-8: è·¨é†«é™¢é‡è¤‡ç”¨è—¥ç‡ â­</h4>
                        <div class="value">8.5%</div>
                        <div class="range">ç¯„åœ: 6.0% - 11.0%</div>
                    </div>
                    
                    <div class="indicator-card">
                        <h4>æŒ‡æ¨™ 11-1: é«˜è¡€å£“æ§åˆ¶ä¸è‰¯ç‡</h4>
                        <div class="value">22.0%</div>
                        <div class="range">ç¯„åœ: 18.0% - 26.0%</div>
                    </div>
                    
                    <div class="indicator-card">
                        <h4>æŒ‡æ¨™ 12: 14 æ—¥å…§å†ä½é™¢ç‡</h4>
                        <div class="value">7.0%</div>
                        <div class="range">ç¯„åœ: 5.0% - 9.0%</div>
                    </div>
                    
                    <div class="indicator-card">
                        <h4>æŒ‡æ¨™ 14: å‰–è…¹ç”¢ç‡</h4>
                        <div class="value">35.0%</div>
                        <div class="range">ç¯„åœ: 30.0% - 40.0%</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>â­ è·¨é†«é™¢é‡è¤‡ç”¨è—¥åµæ¸¬ç‚ºå°ˆåˆ©æŠ€è¡“</p>
            <p>è³‡æ–™ä¾†æº: Synthea åˆæˆè³‡æ–™ + çœŸå¯¦è®Šç•°å¾Œè™•ç†</p>
        </div>
    </div>
    
    <script>
        // è¼‰å…¥ä¸¦åˆ†æ FHIR è³‡æ–™
        async function loadData() {
            try {
                const dataDir = '../generated-fhir-data/fhir-processed';
                
                // æ³¨æ„: ç”±æ–¼ç€è¦½å™¨å®‰å…¨é™åˆ¶ï¼Œç„¡æ³•ç›´æ¥è®€å–æœ¬åœ°æª”æ¡ˆç³»çµ±
                // æ­¤è™•æä¾›çµ±è¨ˆé‚è¼¯ï¼Œå¯¦éš›éœ€è¦é€é Node.js æˆ–æœ¬åœ°ä¼ºæœå™¨åŸ·è¡Œ
                
                // æ¨¡æ“¬è³‡æ–™ï¼ˆå¯¦éš›æ‡‰ç”¨éœ€è¦å¾Œç«¯æ”¯æ´ï¼‰
                const mockStats = {
                    fileCount: 1000,
                    patientCount: 1000,
                    totalResources: 45000,
                    totalSize: 850,
                    resourceTypes: {
                        'Patient': 1000,
                        'Encounter': 8500,
                        'Observation': 15000,
                        'Condition': 5500,
                        'MedicationRequest': 7500,
                        'Procedure': 3200,
                        'DiagnosticReport': 2800,
                        'Immunization': 1200,
                        'CarePlan': 300
                    }
                };
                
                displayStats(mockStats);
                
            } catch (error) {
                showError(error.message);
            }
        }
        
        function displayStats(stats) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('content').style.display = 'block';
            
            document.getElementById('fileCount').textContent = stats.fileCount.toLocaleString();
            document.getElementById('patientCount').textContent = stats.patientCount.toLocaleString();
            document.getElementById('resourceCount').textContent = stats.totalResources.toLocaleString();
            document.getElementById('totalSize').textContent = stats.totalSize.toFixed(1);
            
            const resourceList = document.getElementById('resourceTypes');
            resourceList.innerHTML = '';
            
            Object.entries(stats.resourceTypes)
                .sort((a, b) => b[1] - a[1])
                .forEach(([type, count]) => {
                    const item = document.createElement('div');
                    item.className = 'resource-item';
                    item.innerHTML = `
                        <span class="name">${type}</span>
                        <span class="count">${count.toLocaleString()}</span>
                    `;
                    resourceList.appendChild(item);
                });
        }
        
        function showError(message) {
            document.getElementById('loading').style.display = 'none';
            const errorDiv = document.getElementById('error');
            errorDiv.className = 'error';
            errorDiv.innerHTML = `
                <strong>âš  æç¤º</strong><br>
                æ­¤é è¦½é é¢éœ€è¦é€éæœ¬åœ° HTTP ä¼ºæœå™¨åŸ·è¡Œæ‰èƒ½è®€å–å¯¦éš›è³‡æ–™ã€‚<br>
                ç›®å‰é¡¯ç¤ºçš„æ˜¯æ¨¡æ“¬çµ±è¨ˆæ•¸æ“šã€‚<br><br>
                <strong>å»ºè­°:</strong><br>
                1. åŸ·è¡Œ validate-fhir.js æŸ¥çœ‹å¯¦éš›çµ±è¨ˆ<br>
                2. æˆ–ä½¿ç”¨ç°¡æ˜“ä¼ºæœå™¨: <code>python -m http.server 8000</code>
            `;
            errorDiv.style.display = 'block';
            
            // ä»ç„¶é¡¯ç¤ºæ¨¡æ“¬è³‡æ–™
            displayStats({
                fileCount: 1000,
                patientCount: 1000,
                totalResources: 45000,
                totalSize: 850,
                resourceTypes: {
                    'Patient': 1000,
                    'Encounter': 8500,
                    'Observation': 15000,
                    'Condition': 5500,
                    'MedicationRequest': 7500,
                    'Procedure': 3200,
                    'DiagnosticReport': 2800,
                    'Immunization': 1200,
                    'CarePlan': 300
                }
            });
        }
        
        // é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
        window.addEventListener('load', loadData);
    </script>
</body>
</html>
