# FHIR Dashboard App - 快速使用指南

## 🚀 快速開始

### 1. 開啟首頁
瀏覽器打開 `index.html`

### 2. 設定FHIR伺服器
1. 選擇FHIR伺服器（推薦：HAPI FHIR R4）
2. 點擊「測試連線」
3. 確認連線成功

### 3. 選擇儀表板
點擊導航選單進入不同儀表板：

## 📊 四大儀表板功能

### 🦠 傳染病管制
**路徑：** `disease-control.html`

**監測項目：**
- COVID-19
- 流感
- 登革熱
- 腸病毒
- 急性腹瀉

**操作方式：**
1. 點擊「執行查詢」按鈕
2. 查看統計數據
3. 點擊卡片查看詳情

---

### 💉 國民健康
**路徑：** `public-health.html`

**監測項目：**
- COVID-19 疫苗接種率
- 流感疫苗接種率
- 高血壓活動個案數

**數據顯示：**
- 接種人數
- 接種率百分比
- 管理控制率

---

### 🌱 ESG指標
**路徑：** `esg-indicators.html`

**監測項目：**
- 抗生素使用率（社會責任）
- 電子病歷採用率（治理透明）
- 醫療廢棄物管理（環境保護）

**指標意義：**
- **抗生素使用率** - 反映合理用藥政策
- **EHR採用率** - 評估數位化程度
- **廢棄物管理** - 展現環保責任

---

### 🏆 醫療品質
**路徑：** `quality-indicators.html`

**39個指標分為5大類：**

#### 1️⃣ 用藥安全 (16個指標)
- 指標01: 門診注射劑使用率
- 指標02: 門診抗生素使用率
- 指標03-1至03-16: 藥品重疊率

#### 2️⃣ 門診品質 (5個指標)
- 指標04: 慢性病連續處方箋
- 指標05: 處方10種以上藥品
- 指標06: 小兒氣喘急診率
- 指標07: 糖尿病HbA1c檢驗
- 指標08: 同日再就診率

#### 3️⃣ 住院品質 (5個指標)
- 指標09: 14天內再入院率
- 指標10: 出院後3天內急診
- 指標11-1至11-4: 剖腹產率

#### 4️⃣ 手術品質 (10個指標)
- 指標12: 清淨手術抗生素
- 指標13: ESWL平均次數
- 指標14: 子宮肌瘤手術
- 指標15-1至15-3: 膝關節置換
- 指標16: 手術傷口感染
- 指標19: 清淨手術感染

#### 5️⃣ 結果品質 (2個指標)
- 指標17: 心肌梗塞死亡率
- 指標18: 失智症安寧療護

**使用分類篩選：**
- 點擊頂部標籤可切換顯示類別
- 「全部」顯示所有39個指標
- 各分類單獨顯示對應指標

---

## 🎯 操作說明

### 執行查詢
1. 點擊卡片上的「執行查詢」按鈕
2. 等待查詢完成（顯示spinner動畫）
3. 查看更新的統計數據

### 查看詳情
1. 點擊整個卡片區域
2. Modal彈窗顯示詳細資訊
3. 點擊「X」或彈窗外關閉

### 匯出資料
1. 點擊右上角「匯出資料」按鈕
2. 自動下載JSON格式數據文件
3. 文件名包含日期時間戳記

### 重新整理
點擊「重新整理」按鈕刷新整個頁面

---

## 💡 提示說明

### ✅ 成功狀態
- 綠色勾選圖標
- 顯示「完成」訊息
- 數據自動更新

### ⏳ 執行中狀態
- 藍色旋轉圖標
- 顯示「執行中...」
- 按鈕變為禁用狀態

### ❌ 失敗狀態
- 紅色錯誤圖標
- 顯示錯誤訊息
- 建議檢查連線

### 📊 資料庫無資料
- 灰色資料庫圖標
- 顯示「資料庫無資料」
- 建議切換FHIR伺服器

---

## 🔍 資料說明

### 日期範圍
所有儀表板統一顯示：**「資料範圍: 全部資料」**
- 不限制查詢時間
- 涵蓋所有歷史資料
- 更全面的數據分析

### 統計方式
- **累計數據** - 所有時間的總和
- **比率計算** - 分子/分母 × 100%
- **年度對比** - 2024年 vs 2025年（傳染病）

---

## 🎨 色彩識別

### 儀表板顏色
- 🔴 **傳染病** - 紅/藍/橘/紫/綠
- 💙 **國民健康** - 青/紫色系
- 🟠 **ESG指標** - 橘/藍/綠色系
- 🟣 **醫療品質** - 粉/靛/紫/橘/綠色系

### 狀態顏色
- 🟢 **成功** - 綠色 (#10b981)
- 🔵 **執行中** - 藍色 (#2563eb)
- 🔴 **錯誤** - 紅色 (#ef4444)
- ⚪ **無資料** - 灰色 (#94a3b8)

---

## 📱 響應式設計

### 桌面版 (>768px)
- 多欄網格佈局
- 完整功能顯示
- 側邊導航選單

### 平板版 (768px)
- 兩欄網格佈局
- 自動調整字體
- 優化觸控區域

### 手機版 (<768px)
- 單欄垂直佈局
- 大型觸控按鈕
- 簡化統計顯示

---

## ⚙️ 進階設定

### 切換FHIR伺服器
1. 返回首頁
2. 選擇下拉選單
3. 選擇其他伺服器或自訂URL
4. 重新測試連線

### 推薦伺服器
- ⭐ **HAPI FHIR R4** (https://hapi.fhir.org/baseR4)
  - 最推薦使用
  - 資料豐富
  - 穩定可靠

- **SMART Health IT** (https://r4.smarthealthit.org)
  - 測試資料完整
  - 支援完整FHIR R4

### 驗證令牌
如連接私有FHIR伺服器：
1. 在「驗證令牌」欄位輸入Bearer token
2. 點擊測試連線
3. 確認權限正確

---

## 🐛 常見問題

### Q: 顯示「資料庫無資料」？
**A:** 可能原因：
- FHIR伺服器無該類型資料
- 查詢條件過於嚴格
- 伺服器資料尚未建立

**解決方式：**
- 切換到HAPI FHIR伺服器
- 嘗試其他指標查詢
- 檢查伺服器狀態

### Q: 連線失敗？
**A:** 檢查項目：
- 網路連線是否正常
- FHIR伺服器URL是否正確
- 是否需要驗證令牌
- 瀏覽器CORS設定

### Q: 查詢很慢？
**A:** 可能原因：
- FHIR伺服器回應慢
- 資料量太大
- 網路速度慢

**建議：**
- 耐心等待完成
- 減少同時查詢數量
- 切換網路環境

### Q: 數據不準確？
**A:** 說明：
- 部分指標使用模擬算法
- 實際應用需連接真實EMR
- CQL邏輯需根據機構調整

---

## 📚 相關資源

### CQL文件位置
`FHIR-Dashboard-App/cql/`

### 文件總數
- 傳染病: 5個
- 國民健康: 3個
- ESG指標: 3個
- 醫療品質: 39個
- **總計: 50個CQL文件**

### 技術標準
- FHIR R4
- CQL 1.0
- HL7標準
- WHO ATC/DDD
- 健保署指標

---

## 🎓 學習資源

### FHIR官方文件
https://www.hl7.org/fhir/

### CQL規範
https://cql.hl7.org/

### HAPI FHIR
https://hapifhir.io/

---

## 📞 技術支援

如遇到問題或需要協助，請查閱：
- `UPDATE_SUMMARY.md` - 完整更新報告
- `README.md` - 專案說明文件
- `TROUBLESHOOTING.md` - 故障排除指南

---

**版本：** v2.0.0  
**更新日期：** 2025年11月20日  
**狀態：** ✅ 已完成測試
